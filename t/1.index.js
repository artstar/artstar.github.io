(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(e,t,r){"use strict";r.r(t);var n=r(3);function i(){return BigInt((new Date).getTime())}let c=void 0;document.addEventListener("keydown",e=>{switch(e.code){case"KeyW":case"ArrowUp":c=n.a.Up;break;case"KeyA":case"ArrowLeft":c=n.a.Left;break;case"KeyD":case"ArrowRight":c=n.a.Right;break;case"KeyS":case"ArrowDown":c=n.a.Down;break;case"Space":case"Enter":c=n.a.Drop;break;case"Escape":case"Backspace":c=n.a.Escape}});let s=n.c.start(i()),a=new class{constructor(e,t,r,n,i,c){this.cols=e,this.rows=t,this.main=r,this.preview=n,this.score=i,this.menu=c;let s=new Array(e*t).fill('<div class="cell"></div>');this.main.innerHTML=s.join("");let a=new Array(16).fill('<div class="cell"></div>');this.preview.innerHTML=a.join("")}render(e,t,r){this.textmode(!1),this.draw(e,this.main),this.draw(t,this.preview),this.score.innerText=r.toString()}draw(e,t){let r=Array.from(t.querySelectorAll(".cell"));for(let t=0;t<r.length;t++){let n=r[t].classList;n.contains("color-"+(e[t]||0))||(n.remove(...Array.from(n).filter(e=>e.startsWith("color"))),n.add("color-"+(e[t]||0)))}}text(e,t){this.textmode(!0),this.menu.innerHTML=e.map(e=>`<div class="item">${e}</div>`).join(""),void 0!==t&&this.menu.querySelector(`.item:nth-child(${t+1})`).classList.add("selected")}textmode(e){e?this.menu.classList.add("visible"):(this.menu.classList.remove("visible"),this.menu.innerHTML="")}}(20,10,document.querySelector(".playfield"),document.querySelector(".preview"),document.querySelector(".score"),document.querySelector(".menu"));window.requestAnimationFrame((function e(){let t=s.tick(i(),c);switch(void 0!==c&&(c=void 0),t.action){case n.b.Draw:a.render(Array.from(t.main()),Array.from(t.preview()),t.score());break;case n.b.Text:a.text(t.text_items().split("\n"),t.text_selected());break;case n.b.Exit:return void a.render([],[],0)}window.requestAnimationFrame(e)}))},,function(e,t,r){"use strict";(function(e){r.d(t,"b",(function(){return p})),r.d(t,"a",(function(){return w})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return b}));var n=r(5);let i=new("undefined"==typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});i.decode();let c=null;function s(){return null!==c&&c.buffer===n.m.buffer||(c=new Uint8Array(n.m.buffer)),c}function a(e,t){return i.decode(s().subarray(e,e+t))}const o=new Uint32Array(2),l=new BigUint64Array(o.buffer);let u=null;function d(){return null!==u&&u.buffer===n.m.buffer||(u=new Int32Array(n.m.buffer)),u}function f(e,t){return s().subarray(e/1,e/1+t)}const p=Object.freeze({Idle:0,Exit:1,Draw:2,Text:3}),w=Object.freeze({Up:0,Down:1,Left:2,Right:3,Drop:4,Escape:5});class h{static __wrap(e){const t=Object.create(h.prototype);return t.ptr=e,t}free(){const e=this.ptr;this.ptr=0,n.b(e)}static start(e){l[0]=e;const t=o[0],r=o[1];var i=n.f(t,r);return h.__wrap(i)}tick(e,t){l[0]=e;const r=o[0],i=o[1];var c=n.g(this.ptr,r,i,null==t?6:t);return m.__wrap(c)}}class m{static __wrap(e){const t=Object.create(m.prototype);return t.ptr=e,t}free(){const e=this.ptr;this.ptr=0,n.c(e)}get action(){return n.a(this.ptr)>>>0}set action(e){n.d(this.ptr,e)}main(){n.h(8,this.ptr);var e=d()[2],t=d()[3];let r;return 0!==e&&(r=f(e,t).slice(),n.e(e,1*t)),r}preview(){n.i(8,this.ptr);var e=d()[2],t=d()[3];let r;return 0!==e&&(r=f(e,t).slice(),n.e(e,1*t)),r}score(){n.j(8,this.ptr);var e=d()[2],t=d()[3];return 0===e?void 0:t>>>0}text_items(){n.k(8,this.ptr);var e=d()[2],t=d()[3];let r;return 0!==e&&(r=a(e,t).slice(),n.e(e,1*t)),r}text_selected(){var e=n.l(this.ptr);return 16777215===e?void 0:e}}const b=function(e,t){throw new Error(a(e,t))}}).call(this,r(4)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,r){"use strict";var n=r.w[e.i];e.exports=n;r(3);n.n()}]]);